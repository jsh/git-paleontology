#!/bin/bash -eu

PS4='[\T] '
set -x

first_commit=$(git first)
t0=$(git log -1 --date=short --pretty=format:%ct $first_commit) # first commit, seconds since epoch
now=$(git log -1 --date=short --pretty=format:%ct master) # now, seconds since epoch

set +x
spw=$((7*24*60*60)) # seconds per week
for ((wk=0, sec=$t0; sec<now ; wk+=1, sec+=spw)); do
  printf "$wk "
  git rev-list -1  --before=$sec master
done
set -x

exit 0
